{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
  <script src="https://js.stripe.com/v3/"></script>

  <div class="container text-center">
    <h1>Subscribe</h1>
    <p class="text-muted ">Enter card details.  Your subscription will start immediately</p>
  </div>
    <div class="col-md-8 my-3 mx-auto">
    	<div class="card mx-5">
    		<div class="card-body">
    			<div class="sr-root">
    				<div class="sr-main">

                  <h4 class="mb-4">Payment</h4>
                  {% for p in products %}
                    <p><strong>Subscription:</strong> {{product.name}}</p>
                    {% for plan in p.plan_set.all %}
                      <p><strong>Total:</strong> ${{total}}</p>
                      <p hidden id="priceId">{{plan.id}}</p>
                    {% endfor %}
                  {% endfor %}

                  <form id="payment-form" >

                      <div id="card-element" class="MyCardElement">
                          <!-- Elements will create input elements here -->
                      </div>
                      <!-- We'll put the error messages in this element -->
                      <div id="card-errors" role="alert"></div>

                      <button id="submit" type="submit">
                          <div class="spinner-border  spinner-border-sm text-light hidden" id="spinner" role="status">
                              <span class="sr-only">Loading...</span>
                          </div>
                          <span id="button-text">Subscribe</span>
                      </button>
                  </form>

    		    </div>
    			</div>
        </div>
    	</div>

</div>


<link rel="stylesheet" href="{% static "StripeElements.css" %}">
<script type="text/javascript" src="{% static 'garden_party/js/script.js' %}"></script>
{% endblock %}
