{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
  <script src="https://js.stripe.com/v3/"></script>
  <div class="container text-center">
    <h1>Subscription Details</h1>
  </div>
{% include "cart_snippet.html" %}
<div>
<hr>
<div class="col-md-8 my-3 mx-auto">
    	<div class="card mx-5">
    		<div class="card-body">
    			<div class="sr-root">
    				<div class="sr-main">
    					<form id="payment-form" class="sr-payment-form">
    				    {% csrf_token %}
                  {% crispy form %}
                	<div class="sr-combo-inputs-row mt-2">
                  	<div class="sr-input sr-card-element" id="card-element"></div>
                	</div>
                	<div class="sr-field-error" id="card-errors" role="alert"></div>
                	<button id="submit" class="btn">
                    <div class="spinner-border  spinner-border-sm text-light hidden" id="spinner" role="status">
                     	<span class="sr-only">Loading...</span>
                    </div>
                    <span id="button-text">Subscribe</span><span id="order-amount"></span>
                	</button>
              </form>
    	        <div class="sr-result hidden">
    	          <p>Payment completed<br></p>
    	          <pre>
    	            <code></code>
    	          </pre>
    	        </div>
    		    </div>
    			</div>
        </div>
    	</div>

		  <form id="payload" class="hidden" action="/payment-complete" method="post">
		    {% csrf_token %}
		    <input id ="data-payload" type="hidden" name="payload"/>
      </form>
</div>
</div>

  </div>

  <style>
        /**
       * The CSS shown here will not be introduced in the Quickstart guide, but shows
       * how you can use CSS to style your Element's container.
       */
      .StripeElement {
        box-sizing: border-box;

        height: 40px;

        padding: 10px 12px;

        border: 1px solid transparent;
        border-radius: 4px;
        background-color: white;

        box-shadow: 0 1px 3px 0 #e6ebf1;
        -webkit-transition: box-shadow 150ms ease;
        transition: box-shadow 150ms ease;
      }

      .StripeElement--focus {
        box-shadow: 0 1px 3px 0 #cfd7df;
      }

      .StripeElement--invalid {
        border-color: #fa755a;
      }

      .StripeElement--webkit-autofill {
        background-color: #fefde5 !important;
      }
      .hidden {
          display: none;
      }


      #submit:hover {
        filter: contrast(120%);
      }

      #submit {
        font-feature-settings: "pnum";
        --body-color: #f7fafc;
        --button-color: #556cd6;
        --accent-color: #556cd6;
        --gray-border: #e3e8ee;
        --link-color: #fff;
        --font-color: #697386;
        --body-font-family: -apple-system,BlinkMacSystemFont,sans-serif;
        --radius: 4px;
        --form-width: 400px;
        -webkit-box-direction: normal;
        word-wrap: break-word;
        box-sizing: border-box;
        font: inherit;
        overflow: visible;
        -webkit-appearance: button;
        -webkit-font-smoothing: antialiased;
        margin: 0;
        font-family: inherit;
        -webkit-tap-highlight-color: transparent;
        font-size: 16px;
        padding: 0 12px;
        line-height: 32px;
        outline: none;
        text-decoration: none;
        text-transform: none;
        margin-right: 8px;
        height: 36px;
        border-radius: var(--radius);
        color: #fff;
        border: 0;
        margin-top: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all .2s ease;
        display: block;
        box-shadow: 0 4px 5.5px 0 rgba(0,0,0,.07);
        width: 100%;
        background: var(--button-color);
      }
      </style>
      <script type="text/javascript" src="{% static "script.js" %}"></script>

{% endblock %}
